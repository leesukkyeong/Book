# **3계층형 시스템을 살펴보자**


## 3계층형 시스템의 구성도
주요 구성 요소
- 웹 서버
- AP 서버
- DB 서버
<br></br>

## 주요 개념 설명
프로세스와 스레드
- os상에서 독립성을 가지고 동작
- 프로세스와 스레드가 활동하려면 메모리 공간이 필요(커널 에 의해 메모리상에 확보)

프로세스
- 장점: 개별 처리 독립성이 높음
- 단점: 생성 시 cpu부하가 높음
- 비유: 맞벌이 부부 통장 각자 관리

스레드
- 장점: 생성 시 부하가 낮음
- 메모리 공간을 공유하여 의도치 않은 데이터 읽기/쓰기 발생
- 비유: 외벌이, 부양가족을 둔 느낌

OS 커널
- 커널은 os의 인프라, 심장, 모든 것이다

- 역할: 뒤에서 일어나는 일은 은폐하고, 편리한 인터페이스를 제공
1) 시스템 콜 인터페이스 - 접수 창구 역할
2) 프로세스 관리 - 인솔 선생님 역할
3) 메모리 관리 - 독립성 관리
4) 네트워크 스택
5) 파일 시스템 관리 - 파일 시스템용 인터페이스 제공
6) 장치 드라이버 - 물리 장치용 인터페이스 제공
<br></br>

## 웹 데이터 흐름
전체 흐름
- 웹 브라우저가 요청을 발행
- 이름 해석(Name Resolution)
- 웹 서버 요청 접수
- 웹 서버가 정적 콘텐츠(실시간 변경 필요 없는 데이터)인지 동적 콘텐츠인지 판단
- 필요한 경로로 데이터에 엑세스

AP 서버 흐름(동적 콘텐츠 처리)
- 웹 서버로부터 요청 도착
- 스레드가 요청을 받으면 자신이 계산 가능한지, DB접속이 필요한지 판단
- DB 접속이 필요하면 연결 풀에 엑세스
- DB 서버에 요청을 함

데이터베이스의 주요 흐름
- AP 서버로부터 요청이 도착
- 프로세스가 요청을 접수하고 캐시 존재 확인
- 캐시가 없으면 디스크에 엑세스
- 디스크가 데이터를 반환
- 데이터를 캐시 형태로 저장
- 결과를 AP 서버에 반환

AP 서버~웹 서버
- DB 서버로부터 데이터 도착
- 스레드가 데이터를 가지고 계산 한 후 파일 데이터 생성
- 결과를 웹 서버로 반환

웹 서버~클라이언트 PC
- AP 서버로부터 데이터 도착
- 프로세스는 받은 데이터를 그대로 반환
- 결과가 웹 브라우저로 반환되고 화면에 표시됨
<br></br>

## 가상화
컴퓨터 시스템에서 물리 리소스를 추상화하는 것

컨테이너의 역사
- 정의: 리소스가 격리된 프로세스
- 1970년대 빌 조이가 개발한 chroot가 시발점
- 도커가 등장하여 컨테이너 기술이 주목받기 시작함

- 장점
1. 컨테이너 실행, 정지 속도가 빠름(os와 os커널을 공유하므로)
2. 리소스를 한 곳에서 쉽게 관리(호스트 os의 커널을 공유하므로)
3. 버그를 효율적으로 수정(도커는 라이브러리나 프레임워크 등을 도커 이미지로 묶어서 공유할 수 있는 것이므로)
<br></br>

