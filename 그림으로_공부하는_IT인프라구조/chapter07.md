# **무정지를 위한 인프라 구조**


## 안정성 및 이중화
안정성
- 정의: 시스템 서비스가 가능한 한 멈추지 않도록 하는 것
- 실현수단: 컴포넌트 이중화, 컴포넌트 감시, 데이터 백업

이중화
- 정의: 하나의 기능을 병렬로 나열하여 서비스를 계속화 하는 것
<br></br>

## 서버 내 이중화
특징
- 안정성을 고려 시 중요한 것은 한쪽 전원 탭 전력만으로 서버가 가동될 수 있도록 소비 전력 합계를 낮추는 것
<br></br>

## 저장소 이중화
- 주요 대상: HDD
- HDD 자체 이중화는 RAID로 실행
- RAID는 HDD를 묶어서 그룹으로 만들고 이것을 논리적인 HDD로 인식하는 기술
- RAID의 장점: 안정성 확보, 성능 향상, 용량 확장

버스 이중화
- 장애 시 버스 교체 시간을 고려해야 함
<br></br>

## 웹 서버 이중화
웹 장애 상태 코드
- 100번대: 추가 정보 관련
- 200번대: 정상적으로 처리가 됨
- 300번대: 리다이렉트 관련 에러
- 400번대: 클라이언트 에러, 요청에 문제가 있어서 응답을 반환 못함
- 500번대: 서버 에러, 서러에 문제가 있어서 응답을 반환 못함

주요 퍼시스턴스
- 소스 IP주소
- 쿠키
- url

부하분산 장치의 할당 알고리즘
- 라운드 로빈(서버의 IP주소에 순서대로 요청 할당)
- 최소 연결(세션 수가 가장 적은 서버의 IP주소에 할당)
- 응답 시간(서버의 cpu사용률이나 응답 시간 고려하여 가장 부하가 적은 서버의 IP에 요청을 할당 )
<br></br>

## AP 서버 이중화
연결 풀링의 설계 방침
- 최솟값과 최댓값을 동일하게 설정
- 방화벽 유뮤 확인
<br></br>

## DB 서버 이중화
액티브-스탠바이형 클라스터 구성
- 클러스터는 마스터-워커 개념을 기반으로 함
- 하트비트를 이용해서 상호 간의 상태 확인, 안될 시 스플릿 브레인이라고 함
- 3노드 이상의 클러스터에서 문제 발생 시 다수결로 처리(투표장치)
<br></br>

## 네트워크 장비 이중화
스위치 이중화
- 스위치를 크로스케이블으로 연결하면 스위치 간 통신 가능(캐스케이드)
- 기본적으로 액티브-스탠바이
<br></br>

## 사이트 이중화
글로벌 서버 부하분산 구조
- DNS가 반환하는 IP주소를 동적으로 변경
- 장애가 절대 발생해서는 안되는 시스템에서 사용
- 데이터를 완전히 지키고 싶을 경우 데이터가 원격지에도 기록되어야하므로 동기화함
<br></br>

## 감시
종류
- 생존 감시(서버 인터페이스에 대한 통신을 확인하는 감시)
- 로그(에러)감시
- 성능 감시(디스크 사용률, 메모리 사용 현황 등 감시)

SNMP
- 감시 전용 프로토콜
- 감시대상: 네트워크 장비, 서버 가동 상태, 시스템 리소스, 네트워크 트래픽 등
<br></br>

## 백업
이중화와 다른점: 데이터를 복제해서 별도 장소에 보관

복구 지표
- RTO(recovery time objective): 복구 목표 시간, 복구에 얼마나 걸리나
- RPO(recovery point objective): 복구 기준 시점, 어느 시점을로 복구할 것인가
<br></br>

